import { z } from 'zod';

/**
 * {{pascalCase entity.name}} Validation Schemas
 */

{{#each entity.fields}}
{{#unless isAutoGenerated}}
// {{this.name}} validation
const {{camelCase this.name}}Schema = {{toZodType this.type}}{{#each this.constraints}}{{#ifEquals this.type "max"}}.max({{this.value}}){{/ifEquals}}{{#ifEquals this.type "min"}}.min({{this.value}}){{/ifEquals}}{{/each}};
{{/unless}}
{{/each}}

/**
 * Schema for creating a {{entity.name}}
 */
export const {{pascalCase entity.name}}CreateSchema = z.object({
{{#each entity.fields}}
{{#unless isAutoGenerated}}
{{#unless isPrimaryKey}}
  {{this.name}}: {{camelCase this.name}}Schema{{#unless (isRequired this.constraints)}}.optional(){{/unless}},
{{/unless}}
{{/unless}}
{{/each}}
});

export type {{pascalCase entity.name}}CreateInput = z.infer<typeof {{pascalCase entity.name}}CreateSchema>;

/**
 * Schema for updating a {{entity.name}}
 * All fields are optional for partial updates
 */
export const {{pascalCase entity.name}}UpdateSchema = z.object({
{{#each entity.fields}}
{{#unless isAutoGenerated}}
{{#unless isPrimaryKey}}
  {{this.name}}: {{camelCase this.name}}Schema.optional(),
{{/unless}}
{{/unless}}
{{/each}}
}).partial();

export type {{pascalCase entity.name}}UpdateInput = z.infer<typeof {{pascalCase entity.name}}UpdateSchema>;

/**
 * Schema for {{entity.name}} response
 */
export const {{pascalCase entity.name}}Schema = z.object({
{{#each entity.fields}}
  {{this.name}}: {{toZodType this.type}},
{{/each}}
});

export type {{pascalCase entity.name}} = z.infer<typeof {{pascalCase entity.name}}Schema>;
